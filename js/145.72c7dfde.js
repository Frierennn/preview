"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[145],{5145:function(e,t,l){l.r(t),l.d(t,{default:function(){return h}});var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"about"},[l("div",{staticStyle:{width:"100%"}},[l("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜索",clearable:""},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}}),l("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),l("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.remtableData}},[e._v("重置")]),l("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.vipnewsBaseForm}},[e._v("发布新闻")])],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[l("el-table-column",{attrs:{prop:"id",label:"文章id"}}),l("el-table-column",{attrs:{prop:"fl",sortable:"",label:"类别"}}),e._e(),l("el-table-column",{attrs:{prop:"name",label:"发布者"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("router-link",{attrs:{to:{path:"/user",query:{index:t.row.user_no}}}},[e._v(" "+e._s(t.row.user_name)+" ")])]}}])}),l("el-table-column",{attrs:{label:"文章标题",width:"700px"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("router-link",{attrs:{to:{path:"/notedetail/"+e.fq+t.row.id}}},[e._v(" "+e._s(t.row.title)+" ")])]}}])}),l("el-table-column",{attrs:{prop:"date",label:"发布时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),l("el-table-column",{attrs:{prop:"zan",sortable:"",label:"点赞数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.zan))]}}])}),l("el-table-column",{attrs:{prop:"fan",label:"访问数",width:"80",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.fan))]}}])}),l("el-table-column",{attrs:{prop:"img",label:"轮播图",width:"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.img?l("el-upload",{staticClass:"upload-demo",attrs:{data:e.uploadData,action:"http://localhost:3000/newss/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(l){return e.uploadindex(t.row.id)}}},[e._v("点击上传")]),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1):e._e()]}}])}),l("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",icon:"el-icon-edit"}},[l("router-link",{attrs:{to:{path:"/notechange/"+e.fq+t.row.id}}},[e._v(" 编辑 ")])],1),l("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(l){return e.handleDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1),l("el-dialog",{attrs:{title:"提示",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[l("span",{staticClass:"dialog-footer"},[l("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.del}},[e._v("确 定")])],1)]},proxy:!0}])},[e._v(" 确定要删除吗？ ")])],1)},o=[],n=l(9755),i=l.n(n),s=l(9669),r=l.n(s),c={data(){return{uploadData:{no:""},fileList:[],fq:"0",hide1:!0,hide2:!1,query:{title:"",pageIndex:1,pageSize:10,state:unescape(this.getCookie("user_no"))},searchContent:"",tableData:[],mtableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1}},methods:{vipnewsBaseForm(){this.$router.push({path:"/vipnewsBaseForm"})},uploadindex(e){this.uploadData.no=e,console.log(this.uploadData.no)},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleExceed(e,t){this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,l=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 格式!"),l||this.$message.error("上传图片大小不能超过 2MB!"),t&&l},beforeRemove(e,t){return this.$confirm(`确定移除 ${e.name}？`)},remtableData(){this.tableData=this.mtableData},getData(){r().get("/newss/news").then((e=>{let t=e.data;this.tableData=t,this.mtableData=t}))},baseform(){this.$router.push({path:"/form"})},handleSearch(){var e=this.searchContent&&this.searchContent.toLowerCase(),t=this.tableData;this.tableData=e?t.filter((function(t){return Object.keys(t).some((function(l){return String(t[l]).toLowerCase().match(e)}))})):t},handleDelete(e,t){this.idx=e,this.form=t,this.editVisible=!0},delAllSelection(){const e=this.multipleSelection.length;let t="";this.delList=this.delList.concat(this.multipleSelection);for(let l=0;l<e;l++)t+=this.multipleSelection[l].name+" ";this.$message.error(`删除了${t}`),this.multipleSelection=[]},handleEdit(e,t){this.idx=e,this.form=t,this.editVisible=!0},del(){r().get("/upload/notedel/"+this.fq+this.form.id).then((()=>{this.editVisible=!1,this.$message.success("删除成功"),this.tableData.splice(this.idx,1)})).catch((e=>{console.log(e)}))},getCookie(e){for(var t=e+"=",l=document.cookie.split(";"),a=0;a<l.length;a++){var o=l[a].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}},mounted(){this.getData(),i()(document).ready((function(){i()("#summernote").summernote({height:200,placeholder:"请添加文字内容",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],callbacks:{onImageUpload:function(e){let t=new FormData;e=Array.from(e),e.forEach((e=>{t.append("pic",e)})),r().post("/upload/up",t).then((e=>{console.log(e),e.data.forEach((e=>{i()("#summernote").summernote("insertImage",e)}))})).catch((e=>{console.log(e)}))}}})}))}},u=c,d=l(1001),p=(0,d.Z)(u,a,o,!1,null,"71db817e",null),h=p.exports}}]);
//# sourceMappingURL=145.72c7dfde.js.map