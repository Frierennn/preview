"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[101],{7101:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("div",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜索",clearable:""},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.remtableData}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.vipbaseform}},[e._v("发布活动")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"文章id"}}),e._e(),a("el-table-column",{attrs:{prop:"name",label:"发布者"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/user",query:{index:t.row.user_no}}}},[e._v(" "+e._s(t.row.user_name)+" ")])]}}])}),a("el-table-column",{attrs:{label:"文章标题",width:"700px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/notedetail/"+e.fq+t.row.id}}},[e._v(" "+e._s(t.row.title)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"date",label:"发布时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),a("el-table-column",{attrs:{prop:"zan",sortable:"",label:"点赞数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.zan))]}}])}),a("el-table-column",{attrs:{prop:"fan",label:"访问数",width:"80",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.fan))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"}},[a("router-link",{attrs:{to:{path:"/notechange/"+e.fq+t.row.id}}},[e._v(" 编辑 ")])],1),a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("el-dialog",{attrs:{title:"提示",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.del}},[e._v("确 定")])],1)]},proxy:!0}])},[e._v(" 确定要删除吗？ ")])],1)},o=[],n=a(9755),i=a.n(n),r=a(9669),s=a.n(r),c={data(){return{uploadData:{no:""},fileList:[],fq:"5",hide1:!0,hide2:!1,query:{title:"",pageIndex:1,pageSize:10,state:unescape(this.getCookie("user_no"))},searchContent:"",tableData:[],mtableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1}},methods:{uploadindex(e){this.uploadData.no=e-1,console.log(this.uploadData.no)},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleExceed(e,t){this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},beforeRemove(e,t){return this.$confirm(`确定移除 ${e.name}？`)},remtableData(){this.tableData=this.mtableData},getData(){s().get("/newss/activity").then((e=>{let t=e.data;this.tableData=t,this.mtableData=t}))},vipbaseform(){this.$router.push({path:"/vipform"})},handleSearch(){var e=this.searchContent&&this.searchContent.toLowerCase(),t=this.tableData;this.tableData=e?t.filter((function(t){return Object.keys(t).some((function(a){return String(t[a]).toLowerCase().match(e)}))})):t},handleDelete(e,t){this.idx=e,this.form=t,this.editVisible=!0},delAllSelection(){const e=this.multipleSelection.length;let t="";this.delList=this.delList.concat(this.multipleSelection);for(let a=0;a<e;a++)t+=this.multipleSelection[a].name+" ";this.$message.error(`删除了${t}`),this.multipleSelection=[]},handleEdit(e,t){this.idx=e,this.form=t,this.editVisible=!0},del(){s().get("/upload/notedel/"+this.fq+this.form.id).then((()=>{this.editVisible=!1,this.$message.success("删除成功"),this.tableData.splice(this.idx,1)})).catch((e=>{console.log(e)}))},getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),l=0;l<a.length;l++){var o=a[l].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}},mounted(){this.getData(),i()(document).ready((function(){i()("#summernote").summernote({height:200,placeholder:"请添加文字内容",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],callbacks:{onImageUpload:function(e){let t=new FormData;e=Array.from(e),e.forEach((e=>{t.append("pic",e)})),s().post("/upload/up",t).then((e=>{console.log(e),e.data.forEach((e=>{i()("#summernote").summernote("insertImage",e)}))})).catch((e=>{console.log(e)}))}}})}))}},u=c,d=a(1001),h=(0,d.Z)(u,l,o,!1,null,"6e21cbe7",null),p=h.exports}}]);
//# sourceMappingURL=101.ef3e051a.js.map