"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[737],{4952:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("v-header"),a("navbar"),a("div",{staticClass:"container"},[a("el-page-header",{attrs:{content:"文章编辑"},on:{back:e.goBack}}),a("div",{staticClass:"crumbs baseform"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"})])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"form-box"},[a("el-form",{attrs:{"label-width":"160px"}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"发布者"}},[a("el-input",{attrs:{disabled:!0,e:"width: 160px"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),a("el-form-item",{attrs:{label:"发布日期"}},[a("el-input",{attrs:{disabled:!0,e:"width: 160px"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),""!=e.form.text?a("el-form-item",{attrs:{label:"文章简略"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1):e._e(),a("el-form-item",{staticStyle:{width:"980px"},attrs:{label:"正文"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.detail,expression:"form.detail"}],staticStyle:{height:"100%px"},attrs:{id:"summernote",name:"editordata",rows:"5"},domProps:{value:e.form.detail},on:{input:function(t){t.target.composing||e.$set(e.form,"detail",t.target.value)}}})]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存发布")])],1)],1)],1)])],1)],1)},s=[],o=a(2583),n=a(1665),i=a(9755),l=a.n(i),m=(a(9669),a(4959)),u=a(6969),c={data(){return{user_no:"",form:{title:"",date:"",user_name:"",text:""},index:""}},methods:{checkuserno(e){if(this.user_no=m.Z.getCookie("user_no"),console.log("vip"==this.user_no),"vip"==this.user_no)this.$router.push({path:"/Wtbhome"});else if("1"!=this.user_no){const e=this.$createElement;this.$notify({title:"提示",message:e("i",{style:"color: teal"},"无法编辑")}),this.$router.push({path:"/Wtbhome"})}},goBack(){this.$router.go(-1)},fetchNotes(){this.index=this.$route.params.id;let e=u[0];this.checkuserno(e.user_no),this.form.title=e.title,this.form.user_name=e.user_name,e.text&&(this.form.text=e.text),l()("#summernote").summernote("pasteHTML",e.remark)},getdate(){var e=this;let t=(new Date).getFullYear(),a=(new Date).getMonth()+1,r=(new Date).getDate(),s=(new Date).getHours(),o=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),n=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();e.gettime=t+"/"+a+"/"+r+" "+s+":"+o+":"+n,this.form.date=e.gettime},onSubmit(){let e=this.form.title,t=this.form.user_name,a=this.form.date,r=this.form.text,s=new FormData,o=l()("#summernote").summernote("code");s.append("title",e),s.append("date",a),s.append("user_name",t),s.append("detail",o),""!=this.form.text&&s.append("text",r),this.$message.success("提交成功！"),this.$router.push("/info")}},mounted(){this.fetchNotes(),this.getdate(),l()(document).ready((function(){l()("#summernote").summernote({height:200,placeholder:"请添加文字内容",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],callbacks:{onImageUpload:function(e){let t=new FormData;e=Array.from(e),e.forEach((e=>{t.append("pic",e)}))}}})}))},components:{navbar:o.Z,vHeader:n.Z}},d=c,f=a(1001),p=(0,f.Z)(d,r,s,!1,null,"fa816906",null),h=p.exports}}]);
//# sourceMappingURL=737.f2ae6329.js.map