"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[866],{1866:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",{staticStyle:{height:"130px",width:"100%"}},[r("el-image",{staticStyle:{height:"130px",width:"100%"},attrs:{src:s(3380),fit:" contain "}})],1),r("el-main",[r("el-divider",[r("h1",[e._v("后台管理系统登录")])]),r("div",{staticClass:"center",staticStyle:{"flex-flow":"column","align-items":"center",width:"100%"}},[r("div",[e._v("登录")]),r("br"),r("el-form",{ref:"login",attrs:{model:e.param,rules:e.rules,"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"user_no"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("i",{staticClass:"el-icon-user"})]},proxy:!0}]),model:{value:e.param.user_no,callback:function(t){e.$set(e.param,"user_no",t)},expression:"param.user_no"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码","show-password":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[r("i",{staticClass:"el-icon-lock"})]},proxy:!0}]),model:{value:e.param.password,callback:function(t){e.$set(e.param,"password",t)},expression:"param.password"}})],1),r("div",{staticClass:"login-btn"},[r("div",{staticClass:"log-btn"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)])],1)],1)],1)],1)},a=[],n=s(9669),o=s.n(n),i=s(4959),l={data(){return{param:{user_no:"",password:"",date:""},rules:{user_no:[{required:!0,message:"请输入邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{getCookie(e){for(var t=e+"=",s=document.cookie.split(";"),r=0;r<s.length;r++){var a=s[r].trim();if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},checkuserno(){var e=this.getCookie("user_no");""!=e&&(0==e?console.log("游客已登录"):this.$router.push({path:"/Wtbhome"}))},getDate(){var e=this;let t=(new Date).getFullYear(),s=(new Date).getMonth()+1,r=(new Date).getDate(),a=(new Date).getHours(),n=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),o=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();return e.gettime=t+"/"+s+"/"+r+" "+a+":"+n+":"+o,e.gettime},login(){this.date=this.getDate(),this.$refs.login.validate((e=>{if(!e)return this.$notify.error({title:"错误",message:"请输入邮箱和密码"}),!1;i.Z.clearCookie("user_no"),o().post("/users/viplogin",{user_no:this.param.user_no,password:this.param.password,date:this.date}).then((e=>{let t=e.data;if(1==t.flag){var s=unescape(this.getCookie("user_no"));this.$socket.emit("login",{name:s},(e=>{console.log(e)})),this.$notify({title:"成功",message:t.msg,type:"success"}),this.$router.push({path:"/viphome"})}else this.$notify.error({title:"错误",message:t.msg})})).catch((e=>{console.log(e)}))}))}},mounted(){this.checkuserno()}},u=l,p=s(1001),c=(0,p.Z)(u,r,a,!1,null,null,null),g=c.exports},3380:function(e,t,s){e.exports=s.p+"img/header.77941e89.jpg"}}]);
//# sourceMappingURL=866.a1837e5b.js.map