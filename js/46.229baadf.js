"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[46],{1665:function(e,t,a){a.d(t,{Z:function(){return u}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("h2",{staticClass:"logo"},[e._v("Utopia")]),a("div",{staticClass:"header-right"},[a("div",{staticClass:"header-user-con"},[a("div",[a("el-avatar",{attrs:{src:e.imgUrl,fit:"scale-down",size:"medium"}})],1),a("el-dropdown",{staticClass:"user-name",on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.name)+" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{name:"dropdown"}},[a("el-dropdown-item",{attrs:{command:"退出登录"}},[e._v("退出登录")])],1)],1)],1)])])},o=[],n=a(4959),i=(a(9669),{data(){return{imgUrl:a(7549),name:"游客",message:2}},computed:{collapse(){return this.$store.state.collapse}},methods:{logout(){n.Z.clearCookie("user_no"),n.Z.clearCookie("user_name"),n.Z.clearCookie("state"),n.Z.clearCookie("date"),n.Z.set("refresh","true")},handleCommand(e){for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var r=t[a],o=r.indexOf("="),n=o>-1?r.substr(0,o):r;document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}this.$message(e),this.$router.push("/")},getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){var o=a[r].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},getUserdata(){this.getCookie("user_name")&&(this.name=decodeURI(this.getCookie("user_name"))),this.getCookie("img")&&(this.imgUrl=unescape(this.getCookie("img")))}},mounted(){this.getUserdata()}}),s=i,l=a(1001),m=(0,l.Z)(s,r,o,!1,null,"46832a60",null),u=m.exports},6391:function(e,t,a){a.d(t,{Z:function(){return m}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar"},[a("el-menu",{ref:"menu",staticClass:"el-menu-demo",staticStyle:{width:"980px"},attrs:{"default-active":e.$route.path,mode:"horizontal",router:""}},[a("el-menu-item",{attrs:{index:"/vipnews"}},[e._v("广软新闻")]),a("el-menu-item",{attrs:{index:"/vipnewsedit"}},[e._v("广软新闻编辑")]),a("el-menu-item",{attrs:{index:"/vipActivity"}},[e._v("广软活动中心")]),a("el-menu-item",{attrs:{index:"/vipActivityedit"}},[e._v("广软活动中心编辑")]),a("el-menu-item",{attrs:{index:"/vipFblog"}},[e._v("广软社区分享编辑")]),a("el-menu-item",{attrs:{index:"/vipusers"}},[e._v("用户管理")]),a("el-menu-item",{attrs:{index:"/vipfriends"}},[e._v("我的消息")]),a("el-menu-item",{attrs:{index:"/vipinfo"}},[e._v("个人中心")])],1),a("router-view",{directives:[{name:"show",rawName:"v-show",value:e.nav,expression:"nav"}]})],1)},o=[],n={data(){return{nav:!0,activePath:"/vipnews"}},methods:{}},i=n,s=a(1001),l=(0,s.Z)(i,r,o,!1,null,"64beb410",null),m=l.exports},7046:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("v-header"),a("vipnavbar"),a("div",{staticClass:"container"},[a("el-page-header",{attrs:{content:"新闻文章发布"},on:{back:e.goBack}}),a("br"),a("div",{staticClass:"form-box"},[a("el-form",{ref:"form",attrs:{"label-width":"160px",model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"发布分区"}},[a("el-select",{attrs:{placeholder:"发布分区"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("el-option",{attrs:{label:"轮播",value:"0"}}),a("el-option",{attrs:{label:"快讯",value:"1"}}),a("el-option",{attrs:{label:"视频",value:"2"}}),a("el-option",{attrs:{label:"媒体",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"发布者"}},[a("el-input",{attrs:{disabled:!0,e:"width: 160px"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),a("el-form-item",{attrs:{label:"发布日期"}},[a("el-input",{attrs:{disabled:!0,e:"width: 160px"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),a("el-form-item",{attrs:{label:"文章简略"}},[a("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.form.text,callback:function(t){e.$set(e.form,"text",t)},expression:"form.text"}})],1),a("el-form-item",{staticStyle:{width:"980px"},attrs:{label:"正文"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.detail,expression:"form.detail"}],attrs:{id:"summernote",name:"editordata",rows:"5"},domProps:{value:e.form.detail},on:{input:function(t){t.target.composing||e.$set(e.form,"detail",t.target.value)}}})]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("表单提交")])],1)],1)],1)],1)],1)},o=[],n=a(6391),i=a(1665),s=a(9755),l=a.n(s),m=a(9669),u=a.n(m),d={name:"vipbaseform",data(){return{form:{title:"",user_name:decodeURI(this.getCookie("user_name")),date:"",detail:"",region:"0",text:"",user_no:unescape(this.getCookie("user_no"))},rules:{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:3,message:"最小长度为 3  个字符",trigger:"blur"}]}}},methods:{getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){var o=a[r].trim();if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},goBack(){this.$router.go(-1)},getdate(){var e=this;let t=(new Date).getFullYear(),a=(new Date).getMonth()+1,r=(new Date).getDate(),o=(new Date).getHours(),n=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),i=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();e.gettime=t+"/"+a+"/"+r+" "+o+":"+n+":"+i,this.form.date=e.gettime},onSubmit(e){this.form.detail=l()("#summernote").summernote("code"),this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;u().post("/upload/adddd",this.form).then((e=>{let t=e.data;1==t.affectedRows&&(this.$message.success("提交成功！"),this.$router.push("/vipnews"))})).catch((e=>{console.log(e)}))}))}},mounted(){this.getdate(),l()(document).ready((function(){l()("#summernote").summernote({height:200,placeholder:"请添加文字内容",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],callbacks:{onImageUpload:function(e){let t=new FormData;e=Array.from(e),e.forEach((e=>{t.append("pic",e)})),u().post("/upload/up",t).then((e=>{e.data.forEach((e=>{let t="\\"+e;l()("#summernote").summernote("insertImage",t)}))})).catch((e=>{console.log(e)}))}}})}))},components:{vipnavbar:n.Z,vHeader:i.Z}},c=d,p=a(1001),f=(0,p.Z)(c,r,o,!1,null,"6ea411a0",null),v=f.exports},7549:function(e,t,a){e.exports=a.p+"img/img.66757dfc.jpg"}}]);
//# sourceMappingURL=46.229baadf.js.map