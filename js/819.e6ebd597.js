"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[819],{6819:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("div",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜索",clearable:""},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.remtableData}},[e._v("重置")]),e._v("  "),a("el-input",{staticClass:"handle-input mr10",model:{value:e.noticetext,callback:function(t){e.noticetext=t},expression:"noticetext"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.mass}},[e._v("群发通知")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"user_no"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{attrs:{to:{path:"/user",query:{index:t.row.user_no}}}},[e._v(" "+e._s(t.row.user_no)+" ")])]}}])}),a("el-table-column",{attrs:{label:"user_name",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.user_name,callback:function(a){e.$set(t.row,"user_name","string"===typeof a?a.trim():a)},expression:"scope.row.user_name"}})]}}])}),a("el-table-column",{attrs:{label:"微信号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.phone,callback:function(a){e.$set(t.row,"phone","string"===typeof a?a.trim():a)},expression:"scope.row.phone"}})]}}])}),a("el-table-column",{attrs:{label:"自我介绍",width:"200","Show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.address,callback:function(a){e.$set(t.row,"address","string"===typeof a?a.trim():a)},expression:"scope.row.address"}})]}}])}),a("el-table-column",{attrs:{prop:"date",label:"登录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),a("el-table-column",{attrs:{prop:"follow",sortable:"",label:"粉丝数",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.follow,callback:function(a){e.$set(t.row,"follow","string"===typeof a?a.trim():a)},expression:"scope.row.follow"}})]}}])}),a("el-table-column",{attrs:{prop:"state",label:"state",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.state,callback:function(a){e.$set(t.row,"state","string"===typeof a?a.trim():a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.saveedit(t.row)}}},[e._v(" 保存 ")])]}}])}),a("el-table-column",{attrs:{label:"头像更改",width:"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-upload",{staticClass:"upload-demo",attrs:{data:e.uploadData,action:"http://localhost:3000/users/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,limit:1,"on-success":e.handleSucess,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.uploadindex(t.row.user_no)}}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)]}}])}),a("el-table-column",{attrs:{label:"系统通知",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.notice,callback:function(a){e.$set(t.row,"notice",a)},expression:"scope.row.notice"}}),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.notice(t.row.user_no,t.row.notice)}}},[e._v(" 发送 ")])]}}])})],1)],1)},s=[],l=(a(9755),a(9669)),n=a.n(l),r={data(){return{noticetext:"",uploadData:{no:""},fileList:[],searchContent:"",tableData:[],mtableData:[],multipleSelection:[],delList:[],editVisible:!1,form:{},idx:-1,id:-1}},methods:{beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleSucess(e,t,a){console.log(e,t,a)},mass(){var e=this.getDate();n().post("users/mass",{notice:this.noticetext,date:e}).then((e=>{let t=e.data;1==t.flag&&this.$message.success(t.msg)})),this.noticetext=""},getDate(){var e=this;let t=(new Date).getFullYear(),a=(new Date).getMonth()+1,o=(new Date).getDate(),s=(new Date).getHours(),l=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),n=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();return e.gettime=t+"/"+a+"/"+o+" "+s+":"+l+":"+n,e.gettime},notice(e,t){var a=this.getDate();n().post("users/notice",{user_no:e,notice:t,date:a}).then((e=>{let t=e.data;1==t.flag&&this.$message.success(t.msg)}))},saveedit(e){n().post("/users/userseditsave",e).then((e=>{let t=e.data;1==t.flag&&(this.$message.success(t.msg),this.getData())}))},uploadindex(e){this.uploadData.no=e,console.log(this.uploadData.no)},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleExceed(e,t){this.$message.warning(`当前限制选择 1 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a},beforeRemove(e,t){return this.$confirm(`确定移除 ${e.name}？`)},remtableData(){this.tableData=this.mtableData},getData(){n().get("/users/usersedit").then((e=>{let t=e.data;this.tableData=t,this.mtableData=t}))},vipbaseform(){this.$router.push({path:"/vipform"})},handleSearch(){var e=this.searchContent&&this.searchContent.toLowerCase(),t=this.tableData;this.tableData=e?t.filter((function(t){return Object.keys(t).some((function(a){return String(t[a]).toLowerCase().match(e)}))})):t},delAllSelection(){const e=this.multipleSelection.length;let t="";this.delList=this.delList.concat(this.multipleSelection);for(let a=0;a<e;a++)t+=this.multipleSelection[a].name+" ";this.$message.error(`删除了${t}`),this.multipleSelection=[]},getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){var s=a[o].trim();if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}},mounted(){this.getData()}},i=r,c=a(1001),u=(0,c.Z)(i,o,s,!1,null,"5ab3ca38",null),d=u.exports}}]);
//# sourceMappingURL=819.e6ebd597.js.map